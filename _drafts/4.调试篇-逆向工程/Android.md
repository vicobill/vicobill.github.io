# Android基础知识

Android有4个组件：

- 活动项（Activity）：用户交互入口点，拥有界面的单个屏幕。
- 服务（Service）：通用入口点，会使应用在后台保持运行。（如音乐）
- 广播接收器（BroadcastReciever）:响应系统范围内的广播通知。系统可向未运行的应用传递广播。
- 内容提供程序（ContentProvider）：管理一组共享的应用数据，您可以将这些数据存储在文件系统、SQLite 数据库、网络中或者您的应用可访问的任何其他持久化存储位置

不同组件启动方式：通过向不同的组件传递Intent实现。

- startActivity()
- 通过JobScheduler调度
- sendBroadcast()发起广播
- 在ContentResolver上调用query()执行查询。

## 清单文件：AndroidManifest.xml

Android启动组件之前，*必须*读取清单文件。清单文件声明所有组件，并处于应用项目目录的根目录中。
清单文件还有其他作用：

- 应用需要的任何用户权限
- 根据应用使用的API，声明应用所需的最低API级别
- 声明应用使用或需要的硬件和软件功能。路相机、蓝牙服务、多点触控
- 声明应用需要链接的 API 库（Android框架API除外）。

元素内容：

- 软件包名称：与Java命名空间相匹配。manifest#package。此属性会用于：
  - 将此名称用作应用所生成R.java类（用于访问应用资源）的命名空间
  - 使用此名称解析清单文件中声明的任何相关类名称。
- 图标和标签：application#icon和label
- 组件：manifest#application#activity|service
- 权限：manifest#uses-permission。如联网权限。
- 使用兼容设备的功能：uses-feature。如相机功能。
- 使用的SDK API版本：uses-sdk

## APP资源：res/ => R.

应用的资源存放于外部，便于管理。同时，也会提供备份资源，以适配特定设备。运行时，Android会根据当前配置使用合适资源。

在加入资源时，SDK构建工具会定义唯一的整型ID，可利用次ID来引用资源。资源或来自代码，或来自XML中定义的其他资源。外部化的应用资源，可使用项目的`R`类中生成的资源ID访问这些资源。

资源存放在 `res/`目录，包含其他子目录。

| 目录：         | 资源类型                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `animator/` | 用于定义[属性动画](https://developer.android.google.cn/guide/topics/graphics/prop-animation.html)的 XML 文件。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `anim/`     | 用于定义[渐变动画](https://developer.android.google.cn/guide/topics/graphics/view-animation.html#tween-animation)的 XML 文件。（属性动画也可保存在此目录中，但为了区分这两种类型，属性动画首选 `animator/` 目录。）                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `color/`    | 用于定义颜色状态列表的 XML 文件。请参阅[颜色状态列表资源](https://developer.android.google.cn/guide/topics/resources/color-list-resource.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `drawable/` | 位图文件（`.png`、`.9.png`、`.jpg`、`.gif`）或编译为以下可绘制对象资源子类型的 XML 文件： <br/>- 位图文件<br/>- 九宫格<br/> - 状态列表<br/>- 形状<br/>- 动画可绘制对象<br/>- 其他可绘制对象<br/>          请参阅 [Drawable 资源](https://developer.android.google.cn/guide/topics/resources/drawable-resource.html)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `mipmap/`   | 适用于不同启动器图标密度的可绘制对象文件。<br/><br/>如需了解有关使用 `mipmap/` 文件夹管理启动器图标的详细信息，请参阅[管理项目概览](https://developer.android.google.cn/tools/projects/index.html#mipmap)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `layout/`   | 用于定义用户界面布局的 XML 文件。<br/>请参阅[布局资源](https://developer.android.google.cn/guide/topics/resources/layout-resource.html)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `menu/`     | 用于定义应用菜单（如选项菜单、上下文菜单或子菜单）的 XML 文件。<br/>请参阅[菜单资源](https://developer.android.google.cn/guide/topics/resources/menu-resource.html)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `raw/`      | 需以原始形式保存的任意文件。如要使用原始 [InputStream](https://developer.android.google.cn/reference/java/io/InputStream.html) 打开这些资源，请使用资源 ID（即 `R.raw.*filename*`）调用 [Resources.openRawResource()](https://developer.android.google.cn/reference/android/content/res/Resources.html#openRawResource(int))。<br/> 但是，如需访问原始文件名和文件层次结构，则可以考虑将某些资源保存在 `assets/` 目录（而非 `res/raw/`）下。<br/>`assets/` 中的文件没有资源 ID，因此您只能使用 [AssetManager](https://developer.android.google.cn/reference/android/content/res/AssetManager.html) 读取这些文件。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `values/`   | 包含字符串、整型数和颜色等简单值的 XML 文件。 <br/><br/>其他 `res/` 子目录中的 XML 资源文件会根据 XML 文件名定义单个资源，而 `values/` 目录中的文件可描述多个资源。对于此目录中的文件，`<resources>` 元素的每个子元素均会定义一个资源。例如，`<string>` 元素会创建 `R.string` 资源，`<color>` 元素会创建 `R.color` 资源。 <br/><br/>由于每个资源均使用自己的 XML 元素进行定义，因此您可以随意命名文件，并在某个文件中放入不同的资源类型。但是，您可能需要将独特的资源类型放在不同的文件中，使其一目了然。例如，对于可在此目录中创建的资源，下面给出了相应的文件名约定：<br/> - arrays.xml：资源数组（[类型数组](https://developer.android.google.cn/guide/topics/resources/more-resources.html#TypedArray)）。<br/>- colors.xml：[颜色值](https://developer.android.google.cn/guide/topics/resources/more-resources.html#Color)。<br/> - dimens.xml：[尺寸值](https://developer.android.google.cn/guide/topics/resources/more-resources.html#Dimension)。<br/> - strings.xml：[字符串值](https://developer.android.google.cn/guide/topics/resources/string-resource.html)。<br/>- styles.xml：[样式](https://developer.android.google.cn/guide/topics/resources/style-resource.html)。<br/>  请参阅[字符串资源](https://developer.android.google.cn/guide/topics/resources/string-resource.html)、[样式资源](https://developer.android.google.cn/guide/topics/resources/style-resource.html)和[更多资源类型](https://developer.android.google.cn/guide/topics/resources/more-resources.html)。 |
| `xml/`      | 可在运行时通过调用 [Resources.getXML()](https://developer.android.google.cn/reference/android/content/res/Resources.html#getXml(int)) 读取的任意 XML 文件。各种 XML 配置文件（如[可搜索配置](https://developer.android.google.cn/guide/topics/search/searchable-config.html)）都必须保存在此处。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `font/`     | 带有扩展名的字体文件（如 `.ttf`、`.otf` 或 `.ttc`），或包含 `<font-family>` 元素的 XML 文件。如需详细了解作为资源的字体，请参阅 [XML 中的字体](https://developer.android.google.cn/preview/features/fonts-in-xml.html)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

<font color='red' style=iterable> *注意：切勿将资源文件直接保存在 `res/` 目录内，因为这样会造成编译错误。*</font>

资源格式：`@[package:]type/name`，前缀`?`表示从主题中选取资源。

- 使用Android内置资源：`@android:drawable/smallpic`

### 访问应用资源

所有资源ID都在R类中定义，该类由aapt工具自动生成。在代码中访问资源：`[<包名>.]R.<资源类型>.<资源名称>`; 在XML中访问资源：`@[<包名>:]<资源类型>/<资源名称>`

例如：`com.mypackage.R.drawable.logo` , `@com.mypackage:drawable/logo`



dex文件：是能被DVM识别、加载并执行的格式，可称为字节码格式，或将其等同于Windows下的exe文件。