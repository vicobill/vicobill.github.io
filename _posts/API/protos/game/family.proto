/* 家族
   - 获取家族成员信息
   - 任命某成员位，如嗣子、长老、祭司等
   - 发起家族活动
   - 请求进入家族
   - 取消请求加入家族
   - 发起家族会议
   - 查看家族资产
   - 贡献资产
   - 剔除成员
   - 同意加入
   - 发起考验
   - 发布家族评论跟帖
 */

package msg;
import "BaseType.proto";

//家族成员信息
message FamilyMemberInfo
{
	  uint32  id		= 1;           // 成员ID
	  string  name		= 2;           // 成员名称
	  uint32  level		= 3;           // 成员等级
	  uint32  offline_time = 4;        // 成员上次下次时间 0-当前在线
	  uint32  duty		= 5;          // 成员职务
	  uint32  contribute_food	= 6;		// 个人贡献
	  uint32  contribute_silver	= 7;            // 个人贡献
	  uint32  fightpower 	= 8; 			//成员战力
	  uint32  contribute 	= 9; 	//族贡
}

//请求进入家族的玩家信息
message FamilyReqMemberInfo
{
	 uint32 id		=1;
	 string name	=2;
	 uint32 level	=3;
	 uint64 requestTime	=4;
}

//成员获取物资累积记录(记录家族成员累积获取的各种物资数量，只要玩家在家族就一直存在)
message MemberGotHistory
{
	 uint32 charid                  = 1;    //家族成员的charid
	repeated FamilyStoreGood info          = 2;    //累积获取的物资信息
}

//公会仓库物资变化
message StoreChangeInfo
{
	 uint32 type                    = 1;    //变化类型 1:增加 2:减少 
	 uint32 eway                    = 2;    //变化途径 代码中具体枚举值表示
	 uint32 time                    = 3;    //变化时间点
	 string name_target             = 4;    //与变化相关的家族成员charid
	repeated FamilyStoreGood info           = 5;    //此次变化的物资信息
	 string name_ex                 = 6;    //变化关联成员扩展，如谁操作分配的,非操作用不到
	 uint32 duty                    = 7;    //操作分配的人员在操作时的职位,非操作用不到
}

//查看其他家族基本信息
message FamilyBaseInfo
{
	 uint32 id			= 1;	
	 string name		= 2;
	 uint32 level		= 3;	//家族祠堂等级
	 string master     	= 4;	//族长姓名
	 string note       	= 5;	//公告
	 uint32 member_num 	= 6;	//当前人数
	 uint32	member_max_num	= 7;//最大成员数量
	 uint32 joinlevel  	= 8;	//家族申请加入等级
	 uint32 autojoin   	= 9;	//0.申请加入, 1.自动加入 2.拒绝加入
	 uint32 temple_posx			= 10;//祠堂x 
	 uint32	temple_posy			= 11;//祠堂y  x=0 and y=0表示未放置
	 uint32 flagid		=13;	//旗帜id (A*100 + B)
	 uint32 fightpower 	=14; 	//家族总战力
	 uint32 autojoincondition = 15; //自动加入的战力需求 	
}

//自己所在家族的详细信息
message FamilyDetailInfo
{
	 uint32 id					= 1;	
	 string name				= 2;
	 uint32 level				= 3;//家族祠堂等级
	 string master     			= 4;//族长
	 string note       			= 5;//公告
	 uint32 member_num 			= 6;//当前人数
	 uint32	member_max_num		= 7;//最大成员数量
	 uint32 joinlevel  			= 8;//家族申请加入等级
	 uint32 autojoin   			= 9;//0.申请加入, 1.自动加入 2.拒绝加入
	 uint32 temple_posx			= 10;//祠堂x
	 uint32	temple_posy			= 11;//祠堂y
	 uint32	temple_areaid		= 12;//祠堂所在区域id 0-未放置
	 uint32 camp_posx			= 13;//营帐x
	 uint32	camp_posy			= 14;//营帐y
	 uint32 is_camp				= 15;//是否扎起营帐 0未扎 1扎
	repeated GameConsume family_money	= 16;//家族资源
	 uint32 duty				= 17;//自己所在家族职位
	repeated GameConsume donate_money	= 18;//自己的捐献
	 uint32 flagid				= 19;	//旗帜id (A*100 + B)
	 uint32 fightpower 		= 20;  	//家族总战力
	 uint32 autojoincondition 	= 21; //自动加入的战力需求
	repeated FamilyStoreGood storeinfo	= 22; //公会物资信息
	repeated MemberGotHistory memgot 	= 23; //成员累计获取物资信息
	repeated StoreChangeInfo  storeadd      = 24; //仓库物资增加记录
	repeated StoreChangeInfo  storesub      = 25; //仓库物资减少记录
	
}

//家族其他信息
message FamilyOtherInfo
{
	 uint32 camp_level		= 1;	//营房级别
	 uint32 camp_time		= 2;	//营房升级时间
	 uint32 camp_state		= 3;	//营房状态 正常0，升级中1，扎起3
	 uint32 camp_posx		= 4;	//营房x
	 uint32	camp_posy		= 5;	//营房y

	 uint32 groom_level		= 6;	//马车级别
	 uint32 groom_time		= 7;	//马车升级时间
	 uint32 groom_state		= 8;	//马车状态 正常0，升级中1

	 uint32 doctor_level	= 9;	//医药箱级别
	 uint32 doctor_time		= 10;	//医药箱升级时间
	 uint32 doctor_state	= 11;	//状态 0正常 升级中1

	 uint32 drug			= 12;	//药物量

	 uint32 artizan_level	= 13;	//工具级别
	 uint32 artizan_time	= 14;	//工具升级时间
	 uint32 artizan_state	= 15;	//状态 0正常 升级中1

	 uint32 durable			= 16;	//工具耐久

	 uint32 temple_time		= 17;	//祠堂时间
	 uint32 temple_state	= 18; 	//祠堂状态 正常0 升级中1 修理中2
	 uint32 temple_repairtime = 19; //祠堂修理
	 uint32 temple_protecttime = 20; //祠堂场景保护时间
	 uint32 temple_drug_state= 21; //祠堂药园仓库状态 0正常不在生产 1在生产
	 uint32 temple_tool_state= 22; //祠堂工具生产状态 0正常不在生产 1在生产
	
	 uint32 drug_charge_num  = 23; //本次期望生成药物数量
	 uint32 tool_charge_num	 = 24; //本次期望生成工具数量
}

//通知家族主事人有新请求需要处理 服务器主动推送客户端
message MSG_NotifyFamilyNewInfo_SC
{
}

//家族属性改变
message FamilyAttribute
{
	 uint32 type 		= 1; // 属性类型
	 uint32 value 		= 2; // 属性值
	 string msg		= 3; // 名字修改，或者通告，或者聊天
}
//更新家族属性信息 家族字段
message MSG_NotifyFamilyAttributeUpdate_SC
{
	repeated FamilyAttribute info	= 1; //家族属性集合
}

//家族成员属性改变
message FamilyMemberAttribute
{
	 uint32 charid		= 1; // 成员id
	 uint32 type 		= 2; // 属性类型
	 uint32 value 		= 3; // 属性值
}
//更新成员家族属性信息 //TODO 后续删除
message MSG_NotifyFamilyMemberUpdate_SC
{
	repeated FamilyMemberAttribute info	= 2; //家族成员属性集合
}

//创建家族
message MSG_ReqCreateFamilyCmd_CS
{
	 uint32		userid		= 1; //创建者userid
	 string		name		= 2; //家族名字
	 uint32 	flagid		= 3; //家族旗帜
}

//创建家族返回
message MSG_RetCreateFamilyCmd_SC
{
	 uint32	result = 1;	//创建结果。0-成功，1-失败，2-家族重名
}

//请求加入家族
message MSG_ReqJoinFamilyCmd_CS
{
	 uint32 family_id	= 1;	//目标家族id
}

//加入家族返回
message MSG_RetJoinFamilyCmd_SC
{
	 uint32	result	= 1; //0-成功，1-失败(失败原因不再详细给出，默认客户端检查通过)
}

//查看申请加入家族的玩家列表
message MSG_ReqJoinListFamilyCmd_CS
{
}

message JoinFamilyUser
{
	 uint32	id	= 1;
	 string name	= 2;
	 uint32 level	= 3;
}
message MSG_RetJoinListFamilyCmd_SC
{
	repeated JoinFamilyUser users	= 1;
}

//请求处理家族申请成员
message MSG_ReqHandleReqMember_CS
{
	 uint32	userid		= 1;
	 uint32	result		= 2;	//批准结果，0-拒绝，1-接受
}
//返回
message MSG_RetHandleReqMember_SC
{
	 uint32	result		= 2;	//0-成功，1-失败
}

//退出家族
message MSG_ReqQuitFamilyCmd_CS
{
	 uint32	userid		= 1; //退出家族的玩家ID(0/自己id-自动退出，其他-开除目标成员id)
}
//退出家族返回
message MSG_RetQuitFamilyCmd_SC
{
	 uint32	userid		= 1;
	 uint32	result		= 2; //退出结果，0-成功，1-失败
}

//设置玩家职务
message MSG_ReqSetMemberDutyFamilyCmd_CS
{
	 uint32 userid         = 1;
	 uint32 originaluserid = 2;//原来职位玩家id 0表示没有
	 uint32	duty           = 3; //enum 家族职务
}
message MSG_RetSetMemberDutyFamilyCmd_SC
{
	 uint32	result		= 1; //0-成功 1-失败
}

//家族成员请求家族信息
message MSG_ReqFamilyInfoCmd_CS
{
}

//刷新家族信息
message MSG_RefreshFamilyInfoCmd_SC
{
	 uint32				result		= 1; //0-成功 1-没有家族 2-失败
	 FamilyDetailInfo	info		= 2; //家族详细信息
	 FamilyOtherInfo	other_info	= 3; //家族其他信息	
}

//成员请求家族成员列表
message MSG_ReqFamilyMemberCmd_CS
{
}
message MSG_RetFamilyMemberCmd_SC
{
	 uint32		result			= 1; //0-成功 1-失败
	repeated FamilyMemberInfo members 	= 2;
}

//解散家族
message MSG_ReqDisFamilyCmd_CS
{
}
message MSG_RetDisFamilyCmd_SC
{
	 uint32 result = 1;	//0-成功 1-失败
}

//搜索家族
message MSG_ReqSearchFamilyCmd_CS
{
	 string name = 1; //空的表示随机刷几个
}
message MSG_RetSearchFamilyCmd_SC
{
	 uint32			result		= 1; //0-成功 1-失败
	repeated FamilyBaseInfo infos		= 2; //家园信息
	repeated uint32			familyids	= 3; //已申请的家园
}

//更改家族信息
message MSG_ReqChangeFamilyBaseInfo_CS
{
	 uint32 type	   = 1;		//类型 1.改公告 2.改准入等级 3.改加入方式 4.设置自动加入的战力限制
	 string note       = 2;		//公告
	 uint32 joinlevel  = 3;		//家族申请加入等级
	 uint32 autojoin   = 4;		//0.申请加入, 1.自动加入 2.拒绝加入
	 uint32 autojoincondition = 5; 	//自动加入的战力条件
}
message MSG_RetChangeFamilyBaseInfo_SC
{
	 uint32		result		= 1; //0-成功 1-失败
}

//更改祠堂位置
message MSG_ReqChangeFamilyTemplePos_CS
{
	 uint32 userid	= 1;
	 uint32	posx	= 2;
	 uint32	posy	= 3;
}
message MSG_RetChangeFamilyTemplePos_SC
{
	 uint32	result	= 1; //0-成功 1-失败
}

//请求修改家族旗帜
message MSG_ReqChangeFamilyFlag_CS
{
	 uint32 flagid = 1; //家族旗帜id
}
//返回
message MSG_RetChangeFamilyFlag_SC
{
	 uint32	result	= 1; //0-成功 1-失败
}

//请求从家族踢出某个玩家
message MSG_ReqKickFamilyMember_CS
{
	 uint32 userid	= 1; //家族id
}
//返回
message MSG_RetKickFamilyMember_SC
{
	 uint32	result	= 1; //0-成功 1-失败
}

//请求邀请玩家的邀请列表
message MSG_ReqInviteUserList_CS
{
}
//玩家基本信息
message InviteUser
{
	 uint32 userid	= 1; //玩家id
	 string name	= 2; //玩家姓名
	 uint32 level	= 3; //玩家等级
}
//返回
message MSG_RetInviteUserList_SC
{
	repeated InviteUser users	= 1; //玩家列表
}

//请求邀请某人加入家族
message MSG_ReqInviteUserToJoinFamily_CS
{
	 uint32 userid	= 1; //玩家id
}
//返回
message MSG_RetInviteUserToJoinFamily_SC
{
	 uint32 result = 1; //0 成功 1失败
}
//玩家同意加入某家族的邀请
message MSG_ReqAgreeJoinFamily_CS
{
	 string familyname = 1; //家族姓名
}
message MSG_RetAgreeJoinFamily_SC
{
	 uint32 result  = 1; //0 成功 1失败
}

// --------------------------------------------------------------------------------------
//家族祠堂升级
message MSG_ReqFamilyTempleLevel_CS
{
	 uint32	complete	= 1; //0-升级 1-升级完成 2-立即完成
}
message MSG_RetFamilyTempleLevel_SC
{
	 uint32	complete	= 1; //0-升级 1-升级完成 2-立即完成
	 uint32	result		= 2; //0-成功 1-失败
}


// 家族捐献，场景过来消息
message MSG_ReqFamilyTempleContribute_CS
{
	repeated GameConsume consume	= 1; //捐献资源
}
message MSG_RetFamilyTempleContribute_SC
{
	 uint32	result		= 1; //0-成功 1-失败
}

//家族营地升级
message MSG_ReqFamilyCampLevel_CS
{
	 uint32	complete	= 1; //0-升级 1-升级完成 2-立即完成
}
message MSG_RetFamilyCampLevel_SC
{
	 uint32	complete	= 1; //0-升级 1-升级完成 2-立即完成
	 uint32	result		= 2; //0-成功 1-失败
}

//马车升级
message MSG_ReqFamilyGroomLevel_CS
{
	 uint32 complete        = 1; //0-升级 1-升级完成 2-立即完成
}
message MSG_RetFamilyGroomLevel_SC
{
	 uint32 complete        = 1; //0-升级 1-升级完成 2-立即完成
	 uint32 result          = 2; //0-成功 1-失败
}

//药箱升级
message MSG_ReqFamilyDoctorLevel_CS
{
	 uint32 complete        = 1; //0-升级 1-升级完成 2-立即完成
}
message MSG_RetFamilyDoctorLevel_SC
{
	 uint32 complete        = 1; //0-升级 1-升级完成 2-立即完成
	 uint32 result          = 2; //0-成功 1-失败
}

//药箱药物相关, 生产补充药物
message MSG_ReqFamilyDrugSupply_CS
{
	 uint32 complete        = 1; //0-开始补充  2-立即完成 
	 uint32 num 			= 2; //草药个数
}
message MSG_RetFamilyDrugSupply_SC
{
	 uint32 complete        = 1; //0-开始补充  2-立即完成
	 uint32 result          = 2; //0-成功 1-失败
}

//提取
message MSG_ReqFamilyDrugPickup_CS
{
}
message MSG_RetFamilyDrugPickup_SC
{
	 uint32 result          = 2; //0-成功 1-失败
}

//工具箱升级
message MSG_ReqFamilyToolLevel_CS
{
	 uint32 complete        = 1; //0-升级 1-升级完成 2-立即完成
}
message MSG_RetFamilyToolLevel_SC
{
	 uint32 complete        = 1; //0-升级 1-升级完成 2-立即完成
	 uint32 result          = 2; //0-成功 1-失败
}

//修理  工具制造
message MSG_ReqFamilyToolRepair_CS
{
	 uint32 complete        = 1; //0-开始补充 2-立即完成 
	 uint32 num				= 2; //工具个数
}
message MSG_RetFamilyToolRepair_SC
{
	 uint32 complete        = 1; //0-开始补充  2-立即完成 
	 uint32 result          = 2; //0-成功 1-失败
}

//提取
message MSG_ReqFamilyToolPickup_CS
{
}
message MSG_RetFamilyToolPickup_SC
{
	 uint32 result          = 2; //0-成功 1-失败
}

//家族营地扎起
message MSG_ReqFamilyCampLaunch_CS
{	
	 uint32 posx		= 1;
	 uint32 posy		= 2;
}
//返回
message MSG_RetFamilyCampLaunch_SC
{	
	 uint32 campid		= 1;
	 uint32 posx    	= 2;
	 uint32 posy    	= 3;
	 uint32 result		= 4; //0-成功 1-失败
}

//-----------------------公会仓库相关-------------------------


//公会仓库信息
message MSG_SyncFamilyStoreInfo_SC
{
	repeated FamilyStoreGood info 	= 1; //现存的各类物资
}

//公会仓库物资分配申请
message MSG_ReqAlloctFamilyStore_CS
{
	 uint32 charid 		= 1; //分配对象的charid
	repeated FamilyStoreGood info 	= 2; //分配物资详情
}

//公会仓库物资分配返回
message MSG_RetAlloctFamilyStore_SC
{
	 uint32 ret 			= 1; //0成功 1权限不足 2家族无此玩家 3库存不足 4邮件发送失败等系统错误
}

//更新分配列表某个成员的最新信息
message MSG_SyncMemberGotHistory_SC
{
	 MemberGotHistory info 		= 1; //历史列表某个成员的最新信息
}

//同步所有玩家仓库物资变化消息
message MSG_SyncFamilyStoreChange_SC
{
 	 StoreChangeInfo info 		= 1; //物资变化消息
}

//--------------------------------------------------------------
//-----------------------------公会签到-------------------------

//请求签到
message MSG_ReqFamilySign_CS
{
	
}

//签到返回
message MSG_RetFamilySign_SC
{
	 uint32 ret = 1; 	// 0成功，1失败
}
//------------------------------------------------------------


