# 通用编码风格

## 空格和缩进

- 4个空格大小的tab

- 代码块开始标记`{`不单独放置在单行

  ```
  if (a == b) {
      foo();
  }
  ```

- 超过110字符长度单行，需要分行

  ```c
  int result = reallyLongFunctionOne() + reallyLongFunctionTwo() + 
          reallyLongFunctionThree() + reallyLongFunctionFour();
  
  int result2 = reallyLongFunction(parameterOne, parameterTwo, parameterThree,
          parameterFour, parameterFive, parameterSix);
  ```

- 表达式操作符与操作数之间添加空格

  ```c
  int x = (a + b) * c / d + foo();
  ```

- 函数之间，添加空行

  ```c
  void foo() {
      ...
  }
                            // 空一行
  void bar() {
      ...
  }
  ```

## 命名与变量

* 变量名应具描述性，类似`firstName`或`homeworkScore`。
* 类型名`LikeThis`，常量名`LIKE_THIS`，函数名`like_this`
* 私有成员函数/变量，前缀`_`,`_likeThis` & `_like_this`
* 定义变量应尽可能近。如只在if表达式中用到的变量，最好放在if中，而不是其外。
* **避免**使用魔数
* **避免**使用可修改的全局变量。全局变量应只读。
* 函数名字要简洁、清晰，言简意赅。

## 语句与表达式

- for多用于已知循环次，while多用于未知循环次

- 在循环中，*尽可能*不使用`break`和`continue`

- 避免多余和不必要的分支判断

  

  ## 冗余

- 如果重复相同的代码多次，找到方法删除冗余代码，使其只有一次。例如，可放入辅助函数。如果重复的代码几乎但不完全相同，尝试让辅助函数以参数表示不同部分。

- 将公共代码移出if/else语句，以避免重复

- 如果单个函数很长（>50行），可将其分成更小的子函数。如果函数功能用`和`来描述，则表明要分解成小函数了。

  

  ## 效率

- 将调用结果放在中间变量中，以减少再次调用消耗。

- 代码尽可能保持自解释，自解释不了，就要详细注释

- 尽可能使用前置声明

- 用TODO, FIXME, WARN,HACK标记有问题的代码

## 功能和程序设计

- 传入的参数，尽量保持不变。

- 复制对象，传引用或指针。

- 返回复杂对象时，使用返回参数引用形式

  ```c++
  // good 
  void read_file（string filename，Vector<string>& v）{
       //在v中放入一些数据
      ...
  }
  ```

- 使用字段存储对象的重要数据，但不存储仅在单个函数使用的临时变量。

- 把与概念不相关的功能，设为辅助函数或分拆至辅助模块。

- 当使用异常和RTTI、类型转换时，要注意了

  

